{"version":3,"file":"RegisterView-DjOVWxmZ.js","sources":["../../src/views/RegisterView.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { usePocket } from '../contexts/PocketContext';\n\nconst RegisterView = () => {\n  const [formData, setFormData] = useState({\n    firstName: '',\n    lastName: '',\n    email: '',\n    password: '',\n    confirmPassword: '',\n    role: 'player'\n  });\n  const [validationErrors, setValidationErrors] = useState({});\n  \n  const { register, error, clearError, isLoading } = usePocket();\n  const navigate = useNavigate();\n\n  const validateForm = () => {\n    const errors = {};\n    \n    if (!formData.firstName.trim()) {\n      errors.firstName = 'First name is required';\n    }\n    \n    if (!formData.lastName.trim()) {\n      errors.lastName = 'Last name is required';\n    }\n    \n    if (!formData.email.trim()) {\n      errors.email = 'Email is required';\n    } else if (!/\\S+@\\S+\\.\\S+/.test(formData.email)) {\n      errors.email = 'Email is invalid';\n    }\n    \n    if (!formData.password) {\n      errors.password = 'Password is required';\n    } else if (formData.password.length < 8) {\n      errors.password = 'Password must be at least 8 characters';\n    }\n    \n    if (formData.password !== formData.confirmPassword) {\n      errors.confirmPassword = 'Passwords do not match';\n    }\n    \n    setValidationErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    \n    if (validationErrors[name]) {\n      setValidationErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n    \n    if (error) {\n      clearError();\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n    \n    try {\n      const userData = {\n        firstName: formData.firstName, // For name construction in service\n        lastName: formData.lastName,   // For name construction in service\n        email: formData.email,\n        password: formData.password\n        // role removed - not in PocketBase users collection\n      };\n      \n      const result = await register(userData);\n      \n      if (result && result.requiresLogin) {\n        // Registration succeeded but needs login\n        console.log('Registration successful, need to login separately');\n        // For now, redirect to login page with success message\n        navigate('/login', { \n          state: { \n            message: 'Registration successful! Please log in with your new account.',\n            email: formData.email \n          }\n        });\n      } else {\n        // Auto-login succeeded, go to onboarding\n        navigate('/onboarding');\n      }\n    } catch (error) {\n      console.error('Registration failed:', error);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"max-w-md w-full space-y-8\">\n        <div>\n          <div className=\"mx-auto h-12 w-12 bg-green-600 rounded-full flex items-center justify-center\">\n            <svg\n              className=\"h-8 w-8 text-white\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z\"\n              />\n            </svg>\n          </div>\n          <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\n            Create your account\n          </h2>\n          <p className=\"mt-2 text-center text-sm text-gray-600\">\n            Or{' '}\n            <Link\n              to=\"/login\"\n              className=\"font-medium text-green-600 hover:text-green-500\"\n            >\n              sign in to your existing account\n            </Link>\n          </p>\n        </div>\n        \n        <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit}>\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md\">\n              {error}\n            </div>\n          )}\n          \n          <div className=\"space-y-4\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label htmlFor=\"firstName\" className=\"block text-sm font-medium text-gray-700\">\n                  First name\n                </label>\n                <input\n                  id=\"firstName\"\n                  name=\"firstName\"\n                  type=\"text\"\n                  autoComplete=\"given-name\"\n                  required\n                  className={`mt-1 appearance-none relative block w-full px-3 py-2 border ${validationErrors.firstName ? 'border-red-500' : 'border-gray-300'} placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm`}\n                  placeholder=\"First name\"\n                  value={formData.firstName}\n                  onChange={handleChange}\n                />\n                {validationErrors.firstName && (\n                  <p className=\"mt-1 text-sm text-red-600\">{validationErrors.firstName}</p>\n                )}\n              </div>\n              \n              <div>\n                <label htmlFor=\"lastName\" className=\"block text-sm font-medium text-gray-700\">\n                  Last name\n                </label>\n                <input\n                  id=\"lastName\"\n                  name=\"lastName\"\n                  type=\"text\"\n                  autoComplete=\"family-name\"\n                  required\n                  className={`mt-1 appearance-none relative block w-full px-3 py-2 border ${validationErrors.lastName ? 'border-red-500' : 'border-gray-300'} placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm`}\n                  placeholder=\"Last name\"\n                  value={formData.lastName}\n                  onChange={handleChange}\n                />\n                {validationErrors.lastName && (\n                  <p className=\"mt-1 text-sm text-red-600\">{validationErrors.lastName}</p>\n                )}\n              </div>\n            </div>\n            \n            <div>\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\n                Email address\n              </label>\n              <input\n                id=\"email\"\n                name=\"email\"\n                type=\"email\"\n                autoComplete=\"email\"\n                required\n                className={`mt-1 appearance-none relative block w-full px-3 py-2 border ${validationErrors.email ? 'border-red-500' : 'border-gray-300'} placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm`}\n                placeholder=\"Enter your email\"\n                value={formData.email}\n                onChange={handleChange}\n              />\n              {validationErrors.email && (\n                <p className=\"mt-1 text-sm text-red-600\">{validationErrors.email}</p>\n              )}\n            </div>\n            \n            <div>\n              <label htmlFor=\"role\" className=\"block text-sm font-medium text-gray-700\">\n                Role\n              </label>\n              <select\n                id=\"role\"\n                name=\"role\"\n                className=\"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm\"\n                value={formData.role}\n                onChange={handleChange}\n              >\n                <option value=\"player\">Player</option>\n                <option value=\"coach\">Coach</option>\n                <option value=\"admin\">Admin</option>\n              </select>\n            </div>\n            \n            <div>\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">\n                Password\n              </label>\n              <input\n                id=\"password\"\n                name=\"password\"\n                type=\"password\"\n                autoComplete=\"new-password\"\n                required\n                className={`mt-1 appearance-none relative block w-full px-3 py-2 border ${validationErrors.password ? 'border-red-500' : 'border-gray-300'} placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm`}\n                placeholder=\"Create a password\"\n                value={formData.password}\n                onChange={handleChange}\n              />\n              {validationErrors.password && (\n                <p className=\"mt-1 text-sm text-red-600\">{validationErrors.password}</p>\n              )}\n            </div>\n            \n            <div>\n              <label htmlFor=\"confirmPassword\" className=\"block text-sm font-medium text-gray-700\">\n                Confirm password\n              </label>\n              <input\n                id=\"confirmPassword\"\n                name=\"confirmPassword\"\n                type=\"password\"\n                autoComplete=\"new-password\"\n                required\n                className={`mt-1 appearance-none relative block w-full px-3 py-2 border ${validationErrors.confirmPassword ? 'border-red-500' : 'border-gray-300'} placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm`}\n                placeholder=\"Confirm your password\"\n                value={formData.confirmPassword}\n                onChange={handleChange}\n              />\n              {validationErrors.confirmPassword && (\n                <p className=\"mt-1 text-sm text-red-600\">{validationErrors.confirmPassword}</p>\n              )}\n            </div>\n          </div>\n\n          <div>\n            <button\n              type=\"submit\"\n              disabled={isLoading}\n              className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {isLoading ? (\n                <div className=\"flex items-center\">\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                  Creating account...\n                </div>\n              ) : (\n                'Create account'\n              )}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default RegisterView;"],"names":["RegisterView","formData","setFormData","useState","validationErrors","setValidationErrors","register","error","clearError","isLoading","usePocket","navigate","useNavigate","validateForm","errors","handleChange","e","name","value","prev","handleSubmit","userData","result","jsxs","jsx","Link"],"mappings":"8NAIA,MAAMA,EAAe,IAAM,CACzB,KAAM,CAACC,EAAUC,CAAW,EAAIC,WAAS,CACvC,UAAW,GACX,SAAU,GACV,MAAO,GACP,SAAU,GACV,gBAAiB,GACjB,KAAM,QAAA,CACP,EACK,CAACC,EAAkBC,CAAmB,EAAIF,EAAAA,SAAS,CAAA,CAAE,EAErD,CAAE,SAAAG,EAAU,MAAAC,EAAO,WAAAC,EAAY,UAAAC,CAAA,EAAcC,EAAA,EAC7CC,EAAWC,EAAA,EAEXC,EAAe,IAAM,CACzB,MAAMC,EAAS,CAAA,EAEf,OAAKb,EAAS,UAAU,SACtBa,EAAO,UAAY,0BAGhBb,EAAS,SAAS,SACrBa,EAAO,SAAW,yBAGfb,EAAS,MAAM,OAER,eAAe,KAAKA,EAAS,KAAK,IAC5Ca,EAAO,MAAQ,oBAFfA,EAAO,MAAQ,oBAKZb,EAAS,SAEHA,EAAS,SAAS,OAAS,IACpCa,EAAO,SAAW,0CAFlBA,EAAO,SAAW,uBAKhBb,EAAS,WAAaA,EAAS,kBACjCa,EAAO,gBAAkB,0BAG3BT,EAAoBS,CAAM,EACnB,OAAO,KAAKA,CAAM,EAAE,SAAW,CACxC,EAEMC,EAAgBC,GAAM,CAC1B,KAAM,CAAE,KAAAC,EAAM,MAAAC,CAAA,EAAUF,EAAE,OAC1Bd,EAAYiB,IAAS,CACnB,GAAGA,EACH,CAACF,CAAI,EAAGC,CAAA,EACR,EAEEd,EAAiBa,CAAI,GACvBZ,EAAoBc,IAAS,CAC3B,GAAGA,EACH,CAACF,CAAI,EAAG,EAAA,EACR,EAGAV,GACFC,EAAA,CAEJ,EAEMY,EAAe,MAAOJ,GAAM,CAGhC,GAFAA,EAAE,eAAA,EAEE,EAACH,IAIL,GAAI,CACF,MAAMQ,EAAW,CACf,UAAWpB,EAAS,UACpB,SAAUA,EAAS,SACnB,MAAOA,EAAS,MAChB,SAAUA,EAAS,QAAA,EAIfqB,EAAS,MAAMhB,EAASe,CAAQ,EAElCC,GAAUA,EAAO,eAEnB,QAAQ,IAAI,mDAAmD,EAE/DX,EAAS,SAAU,CACjB,MAAO,CACL,QAAS,gEACT,MAAOV,EAAS,KAAA,CAClB,CACD,GAGDU,EAAS,aAAa,CAE1B,OAASJ,EAAO,CACd,QAAQ,MAAM,uBAAwBA,CAAK,CAC7C,CACF,EAEA,aACG,MAAA,CAAI,UAAU,sFACb,SAAAgB,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,+EACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAU,qBACV,KAAK,OACL,OAAO,eACP,QAAQ,YAER,SAAAA,EAAAA,IAAC,OAAA,CACC,cAAc,QACd,eAAe,QACf,YAAa,EACb,EAAE,sFAAA,CAAA,CACJ,CAAA,EAEJ,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,yDAAyD,SAAA,sBAEvE,EACAD,EAAAA,KAAC,IAAA,CAAE,UAAU,yCAAyC,SAAA,CAAA,KACjD,IACHC,EAAAA,IAACC,EAAA,CACC,GAAG,SACH,UAAU,kDACX,SAAA,kCAAA,CAAA,CAED,CAAA,CACF,CAAA,EACF,EAEAF,EAAAA,KAAC,OAAA,CAAK,UAAU,iBAAiB,SAAUH,EACxC,SAAA,CAAAb,GACCiB,EAAAA,IAAC,MAAA,CAAI,UAAU,oEACZ,SAAAjB,EACH,EAGFgB,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,MAAC,QAAA,CAAM,QAAQ,YAAY,UAAU,0CAA0C,SAAA,aAE/E,EACAA,EAAAA,IAAC,QAAA,CACC,GAAG,YACH,KAAK,YACL,KAAK,OACL,aAAa,aACb,SAAQ,GACR,UAAW,+DAA+DpB,EAAiB,UAAY,iBAAmB,iBAAiB,sIAC3I,YAAY,aACZ,MAAOH,EAAS,UAChB,SAAUc,CAAA,CAAA,EAEXX,EAAiB,WAChBoB,EAAAA,IAAC,KAAE,UAAU,4BAA6B,WAAiB,SAAA,CAAU,CAAA,EAEzE,SAEC,MAAA,CACC,SAAA,CAAAA,MAAC,QAAA,CAAM,QAAQ,WAAW,UAAU,0CAA0C,SAAA,YAE9E,EACAA,EAAAA,IAAC,QAAA,CACC,GAAG,WACH,KAAK,WACL,KAAK,OACL,aAAa,cACb,SAAQ,GACR,UAAW,+DAA+DpB,EAAiB,SAAW,iBAAmB,iBAAiB,sIAC1I,YAAY,YACZ,MAAOH,EAAS,SAChB,SAAUc,CAAA,CAAA,EAEXX,EAAiB,UAChBoB,EAAAA,IAAC,KAAE,UAAU,4BAA6B,WAAiB,QAAA,CAAS,CAAA,CAAA,CAExE,CAAA,EACF,SAEC,MAAA,CACC,SAAA,CAAAA,MAAC,QAAA,CAAM,QAAQ,QAAQ,UAAU,0CAA0C,SAAA,gBAE3E,EACAA,EAAAA,IAAC,QAAA,CACC,GAAG,QACH,KAAK,QACL,KAAK,QACL,aAAa,QACb,SAAQ,GACR,UAAW,+DAA+DpB,EAAiB,MAAQ,iBAAmB,iBAAiB,sIACvI,YAAY,mBACZ,MAAOH,EAAS,MAChB,SAAUc,CAAA,CAAA,EAEXX,EAAiB,OAChBoB,EAAAA,IAAC,KAAE,UAAU,4BAA6B,WAAiB,KAAA,CAAM,CAAA,EAErE,SAEC,MAAA,CACC,SAAA,CAAAA,MAAC,QAAA,CAAM,QAAQ,OAAO,UAAU,0CAA0C,SAAA,OAE1E,EACAD,EAAAA,KAAC,SAAA,CACC,GAAG,OACH,KAAK,OACL,UAAU,iNACV,MAAOtB,EAAS,KAChB,SAAUc,EAEV,SAAA,CAAAS,EAAAA,IAAC,SAAA,CAAO,MAAM,SAAS,SAAA,SAAM,EAC7BA,EAAAA,IAAC,SAAA,CAAO,MAAM,QAAQ,SAAA,QAAK,EAC3BA,EAAAA,IAAC,SAAA,CAAO,MAAM,QAAQ,SAAA,OAAA,CAAK,CAAA,CAAA,CAAA,CAC7B,EACF,SAEC,MAAA,CACC,SAAA,CAAAA,MAAC,QAAA,CAAM,QAAQ,WAAW,UAAU,0CAA0C,SAAA,WAE9E,EACAA,EAAAA,IAAC,QAAA,CACC,GAAG,WACH,KAAK,WACL,KAAK,WACL,aAAa,eACb,SAAQ,GACR,UAAW,+DAA+DpB,EAAiB,SAAW,iBAAmB,iBAAiB,sIAC1I,YAAY,oBACZ,MAAOH,EAAS,SAChB,SAAUc,CAAA,CAAA,EAEXX,EAAiB,UAChBoB,EAAAA,IAAC,KAAE,UAAU,4BAA6B,WAAiB,QAAA,CAAS,CAAA,EAExE,SAEC,MAAA,CACC,SAAA,CAAAA,MAAC,QAAA,CAAM,QAAQ,kBAAkB,UAAU,0CAA0C,SAAA,mBAErF,EACAA,EAAAA,IAAC,QAAA,CACC,GAAG,kBACH,KAAK,kBACL,KAAK,WACL,aAAa,eACb,SAAQ,GACR,UAAW,+DAA+DpB,EAAiB,gBAAkB,iBAAmB,iBAAiB,sIACjJ,YAAY,wBACZ,MAAOH,EAAS,gBAChB,SAAUc,CAAA,CAAA,EAEXX,EAAiB,iBAChBoB,EAAAA,IAAC,KAAE,UAAU,4BAA6B,WAAiB,eAAA,CAAgB,CAAA,CAAA,CAE/E,CAAA,EACF,QAEC,MAAA,CACC,SAAAA,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,SAAUf,EACV,UAAU,mRAET,SAAAA,EACCc,OAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,gEAAA,CAAiE,EAAM,qBAAA,CAAA,CAExF,EAEA,gBAAA,CAAA,CAEJ,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ"}